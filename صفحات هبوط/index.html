<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نجوم التقنية - دوراتك نحو المستقبل</title>
    <!-- تحميل Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- ضبط خط Cairo لجمالية التصميم -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');

        body {
            font-family: 'Cairo', sans-serif;
            background-color: #f7f9fc;
            /* خلفية فاتحة لطيفة */
        }
    </style>
</head>

<body class="text-gray-800">

    <!-- شريط التنقل (Header) -->
    <header class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <div class="text-2xl font-bold text-indigo-600">
                نجوم التقنية
            </div>
            <nav class="hidden md:flex space-x-8 space-x-reverse">
                <a href="#features" class="text-gray-600 hover:text-indigo-600 transition duration-300">المميزات</a>
                <a href="#courses" class="text-gray-600 hover:text-indigo-600 transition duration-300">الدورات</a>
                <a href="#llm-guide" class="text-gray-600 hover:text-indigo-600 transition duration-300">مساري ✨</a>
                <a href="#llm-titles" class="text-gray-600 hover:text-indigo-600 transition duration-300">تسويق ✨</a>
                <a href="#contact" class="text-gray-600 hover:text-indigo-600 transition duration-300">اتصل بنا</a>
            </nav>
            <a href="#register"
                class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300">
                ابدأ الآن
            </a>
        </div>
    </header>

    <main>
        <!-- قسم البطل (Hero Section) -->
        <section class="bg-gradient-to-r from-indigo-500 to-purple-600 py-20 md:py-32 text-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h1 class="text-4xl sm:text-5xl lg:text-6xl font-extrabold mb-4 animate-fadeIn">
                    استثمر في مستقبلك التقني
                </h1>
                <p class="text-xl sm:text-2xl mb-8 opacity-90">
                    دورات تدريبية متقدمة في البرمجة والذكاء الاصطناعي مقدمة من خبراء الصناعة.
                </p>
                <a id="register" href="#"
                    class="inline-block bg-yellow-400 hover:bg-yellow-500 text-gray-900 text-lg font-bold py-3 px-8 rounded-full shadow-2xl transform hover:scale-105 transition duration-300">
                    انضم إلى آلاف الخريجين!
                </a>
            </div>
        </section>

        <!-- قسم المميزات (Features Section) -->
        <section id="features" class="py-16 bg-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-bold text-center mb-12 text-indigo-600">لماذا نجوم التقنية؟</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-10">
                    <!-- ميزة 1: مدربون معتمدون -->
                    <div
                        class="text-center p-6 bg-gray-50 rounded-xl shadow-lg hover:shadow-xl transition duration-300">
                        <svg class="w-10 h-10 text-indigo-500 mx-auto mb-4" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20v-2c0-.422-.057-.831-.167-1.22A5 5 0 0014 12.001a5 5 0 00-2.833 6.78c-.11.389-.167.798-.167 1.22v2h5zm-2-7a5 5 0 00-10 0v2h10v-2z">
                            </path>
                        </svg>
                        <h3 class="text-xl font-semibold mb-2">مدربون خبراء</h3>
                        <p class="text-gray-600">تعلم من محترفين يعملون حاليًا في كبرى شركات التقنية العالمية.</p>
                    </div>

                    <!-- ميزة 2: مشاريع حقيقية -->
                    <div
                        class="text-center p-6 bg-gray-50 rounded-xl shadow-lg hover:shadow-xl transition duration-300">
                        <svg class="w-10 h-10 text-indigo-500 mx-auto mb-4" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
                        </svg>
                        <h3 class="text-xl font-semibold mb-2">تطبيق عملي</h3>
                        <p class="text-gray-600">ركز على المشاريع العملية لتمتلك محفظة أعمال قوية فور التخرج.</p>
                    </div>

                    <!-- ميزة 3: دعم مستمر -->
                    <div
                        class="text-center p-6 bg-gray-50 rounded-xl shadow-lg hover:shadow-xl transition duration-300">
                        <svg class="w-10 h-10 text-indigo-500 mx-auto mb-4" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M8 12h.01M12 12h.01M16 12h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <h3 class="text-xl font-semibold mb-2">مجتمع داعم</h3>
                        <p class="text-gray-600">انضم إلى مجتمع نشط من المتعلمين والخبراء للحصول على الدعم والإرشاد.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- قسم الدورات (Courses Section) -->
        <section id="courses" class="py-16 bg-gray-100">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-bold text-center mb-12 text-indigo-600">اكتشف دوراتنا</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- بطاقة الدورة 1: تطوير الويب الكامل (Full Stack) -->
                    <div id="course-web"
                        class="bg-white rounded-xl shadow-xl overflow-hidden hover:shadow-2xl transform hover:-translate-y-1 transition duration-300">
                        <div class="p-6">
                            <span
                                class="inline-block bg-green-100 text-green-800 text-xs font-semibold px-3 py-1 rounded-full mb-3">شائع</span>
                            <h3 class="text-xl font-bold text-gray-900 mb-2">مسار تطوير الويب الشامل</h3>
                            <p class="text-gray-600 mb-4">تعلم بناء تطبيقات ويب متكاملة من الواجهة الأمامية إلى قواعد
                                البيانات.</p>
                            <ul class="text-sm text-gray-700 space-y-2 mb-4">
                                <li class="flex items-center"><svg class="w-4 h-4 text-indigo-500 ml-2" fill="none"
                                        stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M5 13l4 4L19 7"></path>
                                    </svg> HTML, CSS, JavaScript</li>
                                <li class="flex items-center"><svg class="w-4 h-4 text-indigo-500 ml-2" fill="none"
                                        stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M5 13l4 4L19 7"></path>
                                    </svg> React و Node.js</li>
                            </ul>
                            <a href="#"
                                class="block text-center bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 transition duration-300">التفاصيل</a>
                        </div>
                    </div>

                    <!-- بطاقة الدورة 2: الذكاء الاصطناعي وتعلم الآلة (AI/ML) -->
                    <div id="course-ai"
                        class="bg-white rounded-xl shadow-xl overflow-hidden hover:shadow-2xl transform hover:-translate-y-1 transition duration-300">
                        <div class="p-6">
                            <span
                                class="inline-block bg-red-100 text-red-800 text-xs font-semibold px-3 py-1 rounded-full mb-3">جديد</span>
                            <h3 class="text-xl font-bold text-gray-900 mb-2">مقدمة في الذكاء الاصطناعي</h3>
                            <p class="text-gray-600 mb-4">ابدأ رحلتك في عالم الذكاء الاصطناعي وتعلم بناء النماذج
                                الأساسية.</p>
                            <ul class="text-sm text-gray-700 space-y-2 mb-4">
                                <li class="flex items-center"><svg class="w-4 h-4 text-indigo-500 ml-2" fill="none"
                                        stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M5 13l4 4L19 7"></path>
                                    </svg> Python و Pandas</li>
                                <li class="flex items-center"><svg class="w-4 h-4 text-indigo-500 ml-2" fill="none"
                                        stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M5 13l4 4L19 7"></path>
                                    </svg> أساسيات التعلم الآلي</li>
                            </ul>
                            <a href="#"
                                class="block text-center bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 transition duration-300">التفاصيل</a>
                        </div>
                    </div>

                    <!-- بطاقة الدورة 3: الأمن السيبراني (Cyber Security) -->
                    <div id="course-security"
                        class="bg-white rounded-xl shadow-xl overflow-hidden hover:shadow-2xl transform hover:-translate-y-1 transition duration-300">
                        <div class="p-6">
                            <span
                                class="inline-block bg-blue-100 text-blue-800 text-xs font-semibold px-3 py-1 rounded-full mb-3">احترافي</span>
                            <h3 class="text-xl font-bold text-gray-900 mb-2">مكافحة الهجمات السيبرانية</h3>
                            <p class="text-gray-600 mb-4">تعلم أفضل الممارسات لحماية الأنظمة والشبكات من التهديدات.</p>
                            <ul class="text-sm text-gray-700 space-y-2 mb-4">
                                <li class="flex items-center"><svg class="w-4 h-4 text-indigo-500 ml-2" fill="none"
                                        stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M5 13l4 4L19 7"></path>
                                    </svg> اختبار الاختراق</li>
                                <li class="flex items-center"><svg class="w-4 h-4 text-indigo-500 ml-2" fill="none"
                                        stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M5 13l4 4L19 7"></path>
                                    </svg> أمن الشبكات</li>
                            </ul>
                            <a href="#"
                                class="block text-center bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 transition duration-300">التفاصيل</a>
                        </div>
                    </div>
                </div>

                <!-- الميزة الأولى: دليل المسار المهني (Career Path Guide) ✨ -->
                <div id="llm-guide" class="mt-16 bg-indigo-50 p-8 rounded-2xl shadow-2xl">
                    <h3 class="text-2xl font-bold text-center mb-6 text-indigo-700 flex items-center justify-center">
                        <svg class="w-6 h-6 ml-2 text-yellow-500" fill="currentColor" viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.74-6.86-4.22-6.86-8.93 0-.96.16-1.9.44-2.78l1.01 1.75c-.32.96-.49 1.98-.49 3.03 0 3.73 2.45 6.94 5.8 8.16l-.27.74zm5.79-1.47c-1.39-1.29-2.2-3.13-2.2-5.06 0-3.37 1.83-6.4 4.54-8.08.62 1.87.97 3.88.97 6 0 2.22-.38 4.34-1.12 6.3l-2.19.84zM12 4.07c3.95.74 6.86 4.22 6.86 8.93 0 .96-.16 1.9-.44 2.78l-1.01-1.75c.32-.96.49-1.98.49-3.03 0-3.73-2.45-6.94-5.8-8.16l.27-.74zM8.21 5.47c1.39 1.29 2.2 3.13 2.2 5.06 0 3.37-1.83 6.4-4.54 8.08-.62-1.87-.97-3.88-.97-6 0-2.22.38-4.34 1.12-6.3l2.19-.84z" />
                        </svg>
                        اكتشف مسارك المهني الأمثل (مدعوم من Gemini)
                    </h3>
                    <p class="text-center text-gray-700 mb-6">أخبرنا عن اهتماماتك الحالية، خبرتك، أو أهدافك المستقبلية،
                        وسنستخدم الذكاء الاصطناعي لاقتراح الدورة الأنسب لك.</p>

                    <textarea id="user-interest" rows="4"
                        class="w-full p-4 border border-indigo-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition duration-300"
                        placeholder="مثال: أريد أن أبدأ في مجال تحليل البيانات لكن ليس لدي خبرة في البرمجة..."></textarea>

                    <button id="guide-button"
                        class="mt-4 w-full bg-pink-500 hover:bg-pink-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition duration-300 flex items-center justify-center disabled:opacity-50"
                        onclick="suggestCourse()">
                        <svg id="button-icon" class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9.663 17h4.673M12 3v13m-6 3h12a2 2 0 002-2v-5a2 2 0 00-2-2H6a2 2 0 00-2 2v5a2 2 0 002 2z">
                            </path>
                        </svg>
                        اقتراح المسار الأمثل ✨
                    </button>

                    <!-- منطقة نتائج الاقتراح والتحميل -->
                    <div id="result-area"
                        class="mt-8 p-6 bg-white border-l-4 border-indigo-500 rounded-xl shadow-xl hidden">
                        <h4 class="text-xl font-bold text-indigo-700 mb-3">اقتراح مسارك المهني:</h4>
                        <div id="result-text" class="text-gray-700 leading-relaxed whitespace-pre-wrap"></div>
                    </div>

                    <!-- مؤشر التحميل (Loading Spinner) -->
                    <div id="loading-spinner" class="mt-8 text-center hidden">
                        <div class="inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-r-transparent align-[-0.125em] text-indigo-500 motion-reduce:animate-[spin_1.5s_linear_infinite]"
                            role="status">
                            <span
                                class="!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]">جاري
                                التحميل...</span>
                        </div>
                        <p class="mt-2 text-indigo-500">جاري تحليل اهتماماتك...</p>
                    </div>

                    <!-- منطقة عرض رسائل الخطأ -->
                    <div id="error-message" class="mt-4 p-4 bg-red-100 text-red-700 rounded-lg hidden"></div>
                </div>


                <!-- الميزة الثانية: مولد العناوين التسويقية (Marketing Titles Generator) ✨ -->
                <div id="llm-titles" class="mt-16 bg-pink-50 p-8 rounded-2xl shadow-2xl border-t-4 border-pink-400">
                    <h3 class="text-2xl font-bold text-center mb-6 text-pink-700 flex items-center justify-center">
                        <svg class="w-6 h-6 ml-2 text-pink-500" fill="currentColor" viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.74-6.86-4.22-6.86-8.93 0-.96.16-1.9.44-2.78l1.01 1.75c-.32.96-.49 1.98-.49 3.03 0 3.73 2.45 6.94 5.8 8.16l-.27.74zm5.79-1.47c-1.39-1.29-2.2-3.13-2.2-5.06 0-3.37 1.83-6.4 4.54-8.08.62 1.87.97 3.88.97 6 0 2.22-.38 4.34-1.12 6.3l-2.19.84zM12 4.07c3.95.74 6.86 4.22 6.86 8.93 0 .96-.16 1.9-.44 2.78l-1.01-1.75c.32-.96.49-1.98.49-3.03 0-3.73-2.45-6.94-5.8-8.16l.27-.74zM8.21 5.47c1.39 1.29 2.2 3.13 2.2 5.06 0 3.37-1.83 6.4-4.54 8.08-.62-1.87-.97-3.88-.97-6 0-2.22.38-4.34 1.12-6.3l2.19-.84z" />
                        </svg>
                        مولد العناوين التسويقية للدورات ✨
                    </h3>
                    <p class="text-center text-gray-700 mb-6">هل أنت مسوق؟ اختر دورة وأدخل كلمة مفتاحية للحصول على
                        عناوين إبداعية وجذابة لوسائل التواصل الاجتماعي.</p>

                    <div class="flex flex-col md:flex-row gap-4 mb-4">
                        <select id="course-selector"
                            class="w-full md:w-1/3 p-3 border border-pink-300 rounded-lg focus:ring-pink-500 focus:border-pink-500 transition duration-300">
                            <option value="مسار تطوير الويب الشامل (Full Stack)">مسار تطوير الويب الشامل</option>
                            <option value="مقدمة في الذكاء الاصطناعي وتعلم الآلة">مقدمة في الذكاء الاصطناعي</option>
                            <option value="مكافحة الهجمات السيبرانية (الأمن السيبراني)">مكافحة الهجمات السيبرانية
                            </option>
                        </select>
                        <input type="text" id="keyword-input"
                            class="w-full md:w-2/3 p-3 border border-pink-300 rounded-lg focus:ring-pink-500 focus:border-pink-500 transition duration-300"
                            placeholder="أدخل كلمة مفتاحية للتركيز عليها (مثال: 'وظيفة أحلام', 'دخل إضافي')">
                    </div>

                    <button id="title-button"
                        class="mt-2 w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition duration-300 flex items-center justify-center disabled:opacity-50"
                        onclick="generateTitles()">
                        <svg id="title-button-icon" class="w-5 h-5 ml-2" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z">
                            </path>
                        </svg>
                        توليد عناوين إبداعية ✨
                    </button>

                    <!-- منطقة نتائج التوليد والتحميل -->
                    <div id="titles-result-area"
                        class="mt-8 p-6 bg-white border-l-4 border-pink-500 rounded-xl shadow-xl hidden">
                        <h4 class="text-xl font-bold text-pink-700 mb-3">العناوين المقترحة:</h4>
                        <div id="titles-result-list" class="text-gray-700 leading-relaxed"></div>
                    </div>

                    <!-- مؤشر التحميل (Loading Spinner) for Titles -->
                    <div id="titles-loading-spinner" class="mt-8 text-center hidden">
                        <div class="inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-r-transparent align-[-0.125em] text-pink-500 motion-reduce:animate-[spin_1.5s_linear_infinite]"
                            role="status">
                            <span
                                class="!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]">جاري
                                التوليد...</span>
                        </div>
                        <p class="mt-2 text-pink-500">جاري توليد أفكار تسويقية مبتكرة...</p>
                    </div>

                    <!-- منطقة عرض رسائل الخطأ -->
                    <div id="titles-error-message" class="mt-4 p-4 bg-red-100 text-red-700 rounded-lg hidden"></div>
                </div>
            </div>
        </section>


        <!-- قسم الدعوة إلى العمل (Call to Action - Footer CTA) -->
        <section class="bg-indigo-700 py-16">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-white">
                <h2 class="text-3xl font-bold mb-4">جاهز للتحول الوظيفي؟</h2>
                <p class="text-lg opacity-90 mb-8">ابدأ تجربتك المجانية اليوم واكتشف إمكانياتك غير المحدودة في عالم
                    التقنية.</p>
                <a href="#register"
                    class="inline-block bg-yellow-400 hover:bg-yellow-500 text-gray-900 text-lg font-bold py-3 px-8 rounded-full shadow-2xl transform hover:scale-105 transition duration-300">
                    سجل مجانًا الآن
                </a>
            </div>
        </section>
    </main>

    <!-- التذييل (Footer) -->
    <footer id="contact" class="bg-gray-800 text-white py-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p>&copy; <span id="year"></span> نجوم التقنية. جميع الحقوق محفوظة.</p>
            <div class="flex justify-center space-x-4 space-x-reverse mt-4 text-sm">
                <a href="#" class="hover:text-indigo-400">سياسة الخصوصية</a>
                <a href="#" class="hover:text-indigo-400">شروط الاستخدام</a>
                <a href="mailto:info@techstars.com" class="hover:text-indigo-400">info@techstars.com</a>
            </div>
        </div>
    </footer>

    <!-- JavaScript للوظائف العامة وميزة Gemini -->
    <script>
        document.getElementById('year').textContent = new Date().getFullYear();

        // إضافة تأثير بسيط للظهور التدريجي على العنوان
        window.onload = () => {
            const heading = document.querySelector('h1.animate-fadeIn');
            heading.style.opacity = '0';
            setTimeout(() => {
                heading.style.transition = 'opacity 1s ease-out';
                heading.style.opacity = '1';
            }, 100);
        };

        // **********************************************
        // وظائف LLM - وظائف عامة
        // **********************************************

        // دالة لإجراء محاولة استدعاء مع خاصية التراجع الأسي (Exponential Backoff)
        async function fetchWithRetry(apiUrl, payload, maxRetries = 5) {
            for (let i = 0; i < maxRetries; i++) {
                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (response.ok) {
                        return response.json();
                    } else if (response.status === 429) { // Too Many Requests
                        const delay = Math.pow(2, i) * 1000; // 1s, 2s, 4s, 8s, 16s
                        console.warn(`Rate limit exceeded. Retrying in ${delay / 1000}s...`);
                        await new Promise(resolve => setTimeout(resolve, delay));
                    } else {
                        const errorData = await response.json();
                        throw new Error(`API Error: ${response.status} ${response.statusText}. Details: ${errorData.error.message}`);
                    }
                } catch (error) {
                    if (i === maxRetries - 1) {
                        throw error; // Throw after max retries
                    }
                }
            }
        }

        // **********************************************
        // وظائف LLM - 1. اقتراح المسار المهني
        // **********************************************

        // متغيرات UI للميزة 1
        const guideButton = document.getElementById('guide-button');
        const userInterest = document.getElementById('user-interest');
        const resultArea = document.getElementById('result-area');
        const resultText = document.getElementById('result-text');
        const loadingSpinner = document.getElementById('loading-spinner');
        const errorMessageDiv = document.getElementById('error-message');

        // قائمة الدورات المتاحة لتوجيه النموذج
        const availableCourses = [
            "مسار تطوير الويب الشامل (Full Stack): لتعلم بناء تطبيقات الويب الأمامية والخلفية (React, Node.js).",
            "مقدمة في الذكاء الاصطناعي: لتعلم Python وأساسيات التعلم الآلي والبيانات.",
            "مكافحة الهجمات السيبرانية: لتعلم اختبار الاختراق وأمن الشبكات.",
        ];

        // دالة لعرض رسالة خطأ مؤقتة للميزة 1
        function displayError(message) {
            errorMessageDiv.textContent = message;
            errorMessageDiv.classList.remove('hidden');
            setTimeout(() => {
                errorMessageDiv.classList.add('hidden');
            }, 5000);
        }

        // الدالة الرئيسية لاستدعاء نموذج Gemini للميزة 1
        async function suggestCourse() {
            const userText = userInterest.value.trim();
            if (userText.length < 10) {
                displayError("الرجاء إدخال وصف أكثر تفصيلاً لاهتماماتك (10 أحرف على الأقل).");
                return;
            }

            // إظهار التحميل وتعطيل الزر
            guideButton.disabled = true;
            resultArea.classList.add('hidden');
            loadingSpinner.classList.remove('hidden');
            errorMessageDiv.classList.add('hidden');
            resultText.textContent = '';


            const systemPrompt = `أنت مستشار مهني تقني. مهمتك هي تحليل اهتمامات المستخدم واقتراح الدورة الأنسب من القائمة التالية. يجب أن يكون ردك باللغة العربية، موجزًا (لا يزيد عن 5 جمل)، ويحتوي على:
1. اسم الدورة المقترحة.
2. لماذا هذه الدورة مناسبة لاهتماماتهم.
3. خطوة أولى بسيطة يمكنهم اتخاذها.
قائمة الدورات المتاحة: ${availableCourses.join("; ")}`;

            const userQuery = `اهتماماتي هي: ${userText}. بناءً على هذه الاهتمامات، ما هي الدورة التي تنصحني بها من القائمة؟`;

            // تهيئة بيانات الـ API
            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
            };

            try {
                const result = await fetchWithRetry(apiUrl, payload);

                const generatedText = result.candidates?.[0]?.content?.parts?.[0]?.text;

                if (generatedText) {
                    resultText.textContent = generatedText;
                    resultArea.classList.remove('hidden');
                    // Scroll to the result area
                    resultArea.scrollIntoView({ behavior: 'smooth' });
                } else {
                    displayError("لم يتمكن الذكاء الاصطناعي من توليد اقتراح. يرجى المحاولة مرة أخرى.");
                }

            } catch (error) {
                console.error("Gemini API Error:", error);
                displayError(`حدث خطأ أثناء الاتصال بالخادم. ${error.message}`);
            } finally {
                // إخفاء التحميل وتفعيل الزر
                loadingSpinner.classList.add('hidden');
                guideButton.disabled = false;
            }
        }


        // **********************************************
        // وظائف LLM - 2. توليد العناوين التسويقية
        // **********************************************

        // متغيرات UI للميزة 2
        const titleButton = document.getElementById('title-button');
        const courseSelector = document.getElementById('course-selector');
        const keywordInput = document.getElementById('keyword-input');
        const titlesResultArea = document.getElementById('titles-result-area');
        const titlesResultList = document.getElementById('titles-result-list');
        const titlesLoadingSpinner = document.getElementById('titles-loading-spinner');
        const titlesErrorMessageDiv = document.getElementById('titles-error-message');

        // دالة لعرض رسالة خطأ مؤقتة للميزة 2
        function displayTitlesError(message) {
            titlesErrorMessageDiv.textContent = message;
            titlesErrorMessageDiv.classList.remove('hidden');
            setTimeout(() => {
                titlesErrorMessageDiv.classList.add('hidden');
            }, 5000);
        }

        // الدالة الرئيسية لاستدعاء نموذج Gemini للميزة 2
        async function generateTitles() {
            const selectedCourse = courseSelector.value;
            const keyword = keywordInput.value.trim();

            if (keyword.length < 3) {
                displayTitlesError("الرجاء إدخال كلمة مفتاحية للتركيز عليها (3 أحرف على الأقل).");
                return;
            }

            // إظهار التحميل وتعطيل الزر
            titleButton.disabled = true;
            titlesResultArea.classList.add('hidden');
            titlesLoadingSpinner.classList.remove('hidden');
            titlesErrorMessageDiv.classList.add('hidden');
            titlesResultList.innerHTML = '';

            const systemPrompt = `أنت خبير تسويق إبداعي. مهمتك هي توليد 5 عناوين قصيرة وجذابة للغاية لدورة تدريبية. يجب أن تكون العناوين صالحة للاستخدام في الإعلانات ووسائل التواصل الاجتماعي. يجب أن يكون الناتج قائمة نقطية مرقمة باللغة العربية.`;

            const userQuery = `توليد 5 عناوين إبداعية ومحفزة للدورة التالية: "${selectedCourse}". يجب أن تركز العناوين على الكلمة المفتاحية: "${keyword}".`;

            // تهيئة بيانات الـ API
            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
            };

            try {
                const result = await fetchWithRetry(apiUrl, payload);

                const generatedText = result.candidates?.[0]?.content?.parts?.[0]?.text;

                if (generatedText) {
                    // Convert markdown list to HTML list for clean display
                    const htmlList = generatedText.split('\n').map(line => {
                        // Simple check for numbering (1., 2., 3.)
                        if (line.match(/^\s*\d+\.\s/)) {
                            // Replace numbering with a star icon for aesthetics
                            return `<li class="mt-2 text-lg font-medium text-gray-800 flex items-start"><span class="text-pink-500 ml-2 mt-1">&#9733;</span> ${line.replace(/^\s*\d+\.\s/, '')}</li>`;
                        }
                        return '';
                    }).join('');

                    titlesResultList.innerHTML = `<ul class="list-none space-y-2">${htmlList}</ul>`;
                    titlesResultArea.classList.remove('hidden');
                    // Scroll to the result area
                    titlesResultArea.scrollIntoView({ behavior: 'smooth' });

                } else {
                    displayTitlesError("لم يتمكن الذكاء الاصطناعي من توليد العناوين. يرجى المحاولة مرة أخرى.");
                }

            } catch (error) {
                console.error("Gemini API Error:", error);
                displayTitlesError(`حدث خطأ أثناء الاتصال بالخادم. ${error.message}`);
            } finally {
                // إخفاء التحميل وتفعيل الزر
                titlesLoadingSpinner.classList.add('hidden');
                titleButton.disabled = false;
            }

    </script>
</body>

</html>